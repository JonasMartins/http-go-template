
version: '3'

services:
  htt-go-template:
    container_name: http-go-template-main-prod
    image: http-go-template-main-prod:0.1.0
    build:
      context: ../../../../../
      dockerfile: src/services/main/docker/production/Dockerfile
    ports:
      - "8080:8080"
    # depends_on:
    #   - db
    networks:
      - dev
  # db:
  #   container_name: http-go-template-db
  #   image: postgres:15.3-alpine3.18
  #   restart: always
  #   environment:
  #     - POSTGRES_DB=project
  #     - POSTGRES_USER=postgres
  #     - POSTGRES_PASSWORD=ps_secret
  #   ports:
  #     - "5432:5432"
  #   networks:
  #     - dev
  # migrate:
  #   container_name: http-go-template-migrate
  #   image: migrate/migrate:v4.15.2
  #   profiles: ["tools"]
  #   volumes:
  #     - ./../../internal/repository/postgres/migrations:/migrations
  #   networks:
  #     - dev
  #   entrypoint:
  #     [
  #       "migrate",
  #       "-path",
  #       "/migrations",
  #       "-database",
  #       "postgres://postgres:ps_secret@database:5432/project?sslmode=disable",
  #     ]
  #   command: ["up"]
  #   links:
  #     - db
  #   depends_on:
  #     - db
networks:
  dev:
    driver: bridge

